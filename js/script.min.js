(function(){function h(b){m=void 0===b.buttons?1===b.which:1===b.buttons}function t(b){return[b.id.split("-")[1],b.id.split("-")[2]]}function g(b,c){return 0<=b&&28>b&&0<=c&&28>c}function u(){n();document.getElementById("loadingAnimation").classList.remove("hidden");for(var b=0;14>b;b++)v();for(b=0;14>b;b++)w();b=[];for(let c=0;28>c;c++)for(let a=0;28>a;a++)b.push([d[a][c].g]);b="https://shnpln252.pythonanywhere.com/digits?digits="+JSON.stringify(b);fetch(b,{method:"get",mode:"cors"}).then(c=>c.json()).then(x)}
function w(){let b=0,c=0;var a=!1;let e=!1;for(var f=0;28>f;f++){for(let k=0;28>k;k++)if(0<d[k][f].g){b=f;a=!0;break}if(a)break}for(a=27;0<=a;a--){for(f=27;0<=f;f--)if(0<d[f][a].g){c=28-a;e=!0;break}if(e)break}b!==c&&(b>c&&p(-1),b<c&&p(1))}function v(){let b,c;for(var a=0;28>a;a++)if(d[a].some(e=>0<e.g)){b=a;break}for(a=27;0<=a;a--)if(d[a].some(e=>0<e.g)){c=28-a;break}b!==c&&(b>c&&q(-1),b<c&&q(1))}function r(){let b=[];for(let c=0;28>c;c++)for(let a=0;28>a;a++)0<d[c][a].g&&b.push(d[c][a]);return b}
function q(b){const c=r();-1===b?c.forEach(a=>{g(a.x+b,a.y)&&(d[a.x+b][a.y].g=a.g,d[a.x+b][a.y].h());a.g=0;a.i()}):c.slice().reverse().forEach(a=>{g(a.x+b,a.y)&&(d[a.x+b][a.y].g=a.g,d[a.x+b][a.y].h());a.g=0;a.i()})}function p(b){const c=r();-1===b?c.forEach(a=>{g(a.x,a.y+b)&&(d[a.x][a.y+b].g=a.g,d[a.x][a.y+b].h());a.g=0;a.i()}):c.slice().reverse().forEach(a=>{g(a.x,a.y+b)&&(d[a.x][a.y+b].g=a.g,d[a.x][a.y+b].h());a.g=0;a.i()})}function x(b){let c=[0,0];b.forEach((e,f)=>{e>c[0]&&(c[0]=e,c[1]=f)});let a=
[0,0];b.forEach((e,f)=>{e>a[0]&&e!==c[0]&&(a[0]=e,a[1]=f)});document.getElementById("loadingAnimation").classList.add("hidden");70>100*c[0]?(document.getElementById("guess").textContent="",document.getElementById("guessConfidence").textContent="Confidence too low to guess"):(90<100*c[0]?(document.getElementById("guess").textContent=c[1].toString(),document.getElementById("guessConfidence").textContent="High Confidence (>90%)"):(document.getElementById("guess").textContent=c[1].toString(),document.getElementById("guessConfidence").textContent=
"Low Confidence (70-90%)"),50<100*a[0]&&(document.getElementById("guess").textContent=c[1]+" or "+a[1]))}function y(b){if(m){let [c,a]=t(b.target);d[c][a].j(1);d[c][a].l.forEach(e=>{d[e[0]][e[1]].j(.7)})}}function z(){n();document.getElementById("guess").textContent="";document.getElementById("guessConfidence").textContent="";for(let b=0;28>b;b++)for(let c=0;28>c;c++)d[c][b].g=0,document.getElementById("cell-"+b+"-"+c).style.backgroundColor="white"}function n(){window.getSelection?window.getSelection().removeAllRanges():
document.selection&&document.selection.empty()}let m=!1;const d=[],l=document.getElementById("gameBoard_UI");class A{constructor(b,c){this.x=b;this.y=c;this.g=0;this.l=[]}j(b){this.g+=b;1<this.g&&(this.g=1);this.h()}h(){document.getElementById("cell-"+this.x+"-"+this.y).style.backgroundColor="rgb(30, 30, 30,"+this.g+")"}i(){document.getElementById("cell-"+this.x+"-"+this.y).style.backgroundColor="white"}m(){const b=[-1,0,1];for(let c of b)for(let a of b)!g(this.x+c,this.y+a)||0===c&&0===a||this.l.push([this.x+
c,this.y+a])}}(function(){document.getElementById("start").addEventListener("click",u);document.getElementById("clear").addEventListener("click",z);document.body.onmousedown=h;document.body.onmousemove=h;document.body.onmouseup=h;l.draggable=!1;l.ondragstart=function(){return!1};for(let c=0;28>c;c++){d.push([]);const a=document.createElement("div");a.id="col-"+c;a.classList.add("col");l.appendChild(a);a.draggable=!1;a.ondragstart=function(){return!1};for(let e=0;28>e;e++){var b=new A(c,e);d[c].push(b);
b.m();b=document.createElement("div");b.id="cell-"+c+"-"+e;b.classList.add("cell");a.appendChild(b);b.addEventListener("mouseover",y);b.draggable=!1;b.ondragstart=function(){return!1}}}})()})();
