(function(){function h(b){m=void 0===b.buttons?1===b.which:1===b.buttons}function r(b){return[b.id.split("-")[1],b.id.split("-")[2]]}function g(b,c){return 0<=b&&28>b&&0<=c&&28>c}function t(){document.getElementById("loadingAnimation").classList.remove("hidden");for(var b=0;14>b;b++)u();for(b=0;14>b;b++)v();b=[];for(let c=0;28>c;c++)for(let a=0;28>a;a++)b.push([d[a][c].g]);b="https://shnpln252.pythonanywhere.com/digits?digits="+JSON.stringify(b);fetch(b,{method:"get",mode:"cors"}).then(c=>c.json()).then(w)}
function v(){let b=0,c=0;var a=!1;let e=!1;for(var f=0;28>f;f++){for(let k=0;28>k;k++)if(0<d[k][f].g){b=f;a=!0;break}if(a)break}for(a=27;0<=a;a--){for(f=27;0<=f;f--)if(0<d[f][a].g){c=28-a;e=!0;break}if(e)break}b!==c&&(b>c&&n(-1),b<c&&n(1))}function u(){let b,c;for(var a=0;28>a;a++)if(d[a].some(e=>0<e.g)){b=a;break}for(a=27;0<=a;a--)if(d[a].some(e=>0<e.g)){c=28-a;break}b!==c&&(b>c&&p(-1),b<c&&p(1))}function q(){let b=[];for(let c=0;28>c;c++)for(let a=0;28>a;a++)0<d[c][a].g&&b.push(d[c][a]);return b}
function p(b){const c=q();-1===b?c.forEach(a=>{g(a.x+b,a.y)&&(d[a.x+b][a.y].g=a.g,d[a.x+b][a.y].h());a.g=0;a.j()}):c.slice().reverse().forEach(a=>{g(a.x+b,a.y)&&(d[a.x+b][a.y].g=a.g,d[a.x+b][a.y].h());a.g=0;a.j()})}function n(b){const c=q();-1===b?c.forEach(a=>{g(a.x,a.y+b)&&(d[a.x][a.y+b].g=a.g,d[a.x][a.y+b].h());a.g=0;a.j()}):c.slice().reverse().forEach(a=>{g(a.x,a.y+b)&&(d[a.x][a.y+b].g=a.g,d[a.x][a.y+b].h());a.g=0;a.j()})}function w(b){let c=[0,0];b.forEach((e,f)=>{e>c[0]&&(c[0]=e,c[1]=f)});let a=
[0,0];b.forEach((e,f)=>{e>a[0]&&e!==c[0]&&(a[0]=e,a[1]=f)});document.getElementById("loadingAnimation").classList.add("hidden");70>100*c[0]?(document.getElementById("guess").textContent="",document.getElementById("guessConfidence").textContent="Confidence too low to guess"):(90<100*c[0]?(document.getElementById("guess").textContent=c[1].toString(),document.getElementById("guessConfidence").textContent="High Confidence (>90%)"):(document.getElementById("guess").textContent=c[1].toString(),document.getElementById("guessConfidence").textContent=
"Low Confidence (70-90%)"),50<100*a[0]&&(document.getElementById("guess").textContent=c[1]+" or "+a[1]))}function x(b){if(m){let [c,a]=r(b.target);d[c][a].l(1);d[c][a].m.forEach(e=>{d[e[0]][e[1]].l(.7)})}}function y(){document.getElementById("guess").textContent="";document.getElementById("guessConfidence").textContent="";for(let b=0;28>b;b++)for(let c=0;28>c;c++)d[c][b].g=0,document.getElementById("cell-"+b+"-"+c).style.backgroundColor="white"}let m=!1;const d=[],l=document.getElementById("gameBoard_UI");
class z{constructor(b,c){this.x=b;this.y=c;this.g=0;this.m=[]}l(b){this.g+=b;1<this.g&&(this.g=1);this.h()}h(){document.getElementById("cell-"+this.x+"-"+this.y).style.backgroundColor="rgb(30, 30, 30,"+this.g+")"}j(){document.getElementById("cell-"+this.x+"-"+this.y).style.backgroundColor="white"}i(){const b=[-1,0,1];for(let c of b)for(let a of b)!g(this.x+c,this.y+a)||0===c&&0===a||this.m.push([this.x+c,this.y+a])}}(function(){document.getElementById("start").addEventListener("click",t);document.getElementById("clear").addEventListener("click",
y);document.body.onmousedown=h;document.body.onmousemove=h;document.body.onmouseup=h;l.draggable=!1;l.i=function(){return!1};for(let c=0;28>c;c++){d.push([]);const a=document.createElement("div");a.id="col-"+c;a.classList.add("col");l.appendChild(a);a.draggable=!1;a.i=function(){return!1};for(let e=0;28>e;e++){var b=new z(c,e);d[c].push(b);b.i();b=document.createElement("div");b.id="cell-"+c+"-"+e;b.classList.add("cell");a.appendChild(b);b.addEventListener("mouseover",x);b.draggable=!1;b.i=function(){return!1}}}})()})();
