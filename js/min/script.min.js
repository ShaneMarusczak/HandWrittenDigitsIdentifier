(function(){function t(){var b=[];for(let c=0;28>c;c++)for(let a=0;28>a;a++)b.push([0]);b="https://shnpln252.pythonanywhere.com/digits?digits="+JSON.stringify(b);fetch(b,{method:"get",mode:"cors"}).then(c=>c.json()).then(console.log("server is awake"))}function h(b){m=void 0===b.buttons?1===b.which:1===b.buttons}function u(b){return[b.id.split("-")[1],b.id.split("-")[2]]}function g(b,c){return 0<=b&&28>b&&0<=c&&28>c}function v(){n();document.getElementById("loadingAnimation").classList.remove("hidden");
for(var b=0;14>b;b++)w();for(b=0;14>b;b++)x();b=[];for(let c=0;28>c;c++)for(let a=0;28>a;a++)b.push([d[a][c].greyScaleValue]);b="https://shnpln252.pythonanywhere.com/digits?digits="+JSON.stringify(b);fetch(b,{method:"get",mode:"cors"}).then(c=>c.json()).then(y)}function x(){let b=0,c=0;var a=!1;let e=!1;for(var f=0;28>f;f++){for(let k=0;28>k;k++)if(0<d[k][f].greyScaleValue){b=f;a=!0;break}if(a)break}for(a=27;0<=a;a--){for(f=27;0<=f;f--)if(0<d[f][a].greyScaleValue){c=28-a;e=!0;break}if(e)break}b!==
c&&(b>c&&p(-1),b<c&&p(1))}function w(){let b,c;for(var a=0;28>a;a++)if(d[a].some(e=>0<e.greyScaleValue)){b=a;break}for(a=27;0<=a;a--)if(d[a].some(e=>0<e.greyScaleValue)){c=28-a;break}b!==c&&(b>c&&q(-1),b<c&&q(1))}function r(){let b=[];for(let c=0;28>c;c++)for(let a=0;28>a;a++)0<d[c][a].greyScaleValue&&b.push(d[c][a]);return b}function q(b){const c=r();-1===b?c.forEach(a=>{g(a.x+b,a.y)&&(d[a.x+b][a.y].greyScaleValue=a.greyScaleValue,d[a.x+b][a.y].setBackGround());a.greyScaleValue=0;a.resetBackGround()}):
c.slice().reverse().forEach(a=>{g(a.x+b,a.y)&&(d[a.x+b][a.y].greyScaleValue=a.greyScaleValue,d[a.x+b][a.y].setBackGround());a.greyScaleValue=0;a.resetBackGround()})}function p(b){const c=r();-1===b?c.forEach(a=>{g(a.x,a.y+b)&&(d[a.x][a.y+b].greyScaleValue=a.greyScaleValue,d[a.x][a.y+b].setBackGround());a.greyScaleValue=0;a.resetBackGround()}):c.slice().reverse().forEach(a=>{g(a.x,a.y+b)&&(d[a.x][a.y+b].greyScaleValue=a.greyScaleValue,d[a.x][a.y+b].setBackGround());a.greyScaleValue=0;a.resetBackGround()})}
function y(b){let c=[0,0];b.forEach((e,f)=>{e>c[0]&&(c[0]=e,c[1]=f)});let a=[0,0];b.forEach((e,f)=>{e>a[0]&&e!==c[0]&&(a[0]=e,a[1]=f)});document.getElementById("loadingAnimation").classList.add("hidden");70>100*c[0]?(document.getElementById("guess").textContent="",document.getElementById("guessConfidence").textContent="Confidence too low to guess"):(90<100*c[0]?(document.getElementById("guess").textContent=c[1].toString(),document.getElementById("guessConfidence").textContent="High Confidence (>90%)"):
(document.getElementById("guess").textContent=c[1].toString(),document.getElementById("guessConfidence").textContent="Low Confidence (70-90%)"),50<100*a[0]&&(document.getElementById("guess").textContent=c[1]+" or "+a[1]))}function z(b){if(m){let [c,a]=u(b.target);d[c][a].increaseGreyScale(1);d[c][a].neighbors.forEach(e=>{d[e[0]][e[1]].increaseGreyScale(.7)})}}function A(){n();document.getElementById("guess").textContent="";document.getElementById("guessConfidence").textContent="";document.getElementById("loadingAnimation").classList.add("hidden");
for(let b=0;28>b;b++)for(let c=0;28>c;c++)d[c][b].greyScaleValue=0,document.getElementById("cell-"+b+"-"+c).style.backgroundColor="white"}function n(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}let m=!1;const d=[],l=document.getElementById("gameBoard_UI");class B{constructor(b,c){this.x=b;this.y=c;this.greyScaleValue=0;this.neighbors=[]}increaseGreyScale(b){this.greyScaleValue+=b;1<this.greyScaleValue&&(this.greyScaleValue=1);this.setBackGround()}setBackGround(){document.getElementById("cell-"+
this.x+"-"+this.y).style.backgroundColor="rgb(30, 30, 30,"+this.greyScaleValue+")"}resetBackGround(){document.getElementById("cell-"+this.x+"-"+this.y).style.backgroundColor="white"}setNeighbors(){const b=[-1,0,1];for(let c of b)for(let a of b)!g(this.x+c,this.y+a)||0===c&&0===a||this.neighbors.push([this.x+c,this.y+a])}}(function(){document.getElementById("start").addEventListener("click",v);document.getElementById("clear").addEventListener("click",A);document.body.onmousedown=h;document.body.onmousemove=
h;document.body.onmouseup=h;document.body.onload=t;l.draggable=!1;l.ondragstart=function(){return!1};for(let c=0;28>c;c++){d.push([]);const a=document.createElement("div");a.id="col-"+c;a.classList.add("col");l.appendChild(a);a.draggable=!1;a.ondragstart=function(){return!1};for(let e=0;28>e;e++){var b=new B(c,e);d[c].push(b);b.setNeighbors();b=document.createElement("div");b.id="cell-"+c+"-"+e;b.classList.add("cell");a.appendChild(b);b.addEventListener("mouseover",z);b.draggable=!1;b.ondragstart=
function(){return!1}}}})()})();
